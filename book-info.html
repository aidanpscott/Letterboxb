<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Submitted Book Information - Aidan Scott</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <header class="main-header">
        <h1>Submitted Book Information</h1>
    </header>

    <nav class="topnav">
        <a href="index.html">Home</a>
        <a href="currently-reading.html">Currently Reading</a>
        <a href="favorite-books.html">Top 10 Books</a>
        <a href="favorite-authors.html">Top 10 Authors</a>
        <a href="book-form.html">Share Book</a>
        <a href="book-info.html">Book Info</a>
    </nav>

    <!-- *** PROJECT 5: REQUIREMENT #3: Using createElement and appendChild to create submission display *** -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Create submission section
            const submissionSection = document.createElement('section');
            submissionSection.className = 'submission-section';

            // Create section heading
            const sectionHeading = document.createElement('h2');
            sectionHeading.className = 'section-title';
            sectionHeading.textContent = 'Featured Submission';

            // Create submission container
            const submissionContainer = document.createElement('div');
            submissionContainer.className = 'submission-container';

            // Create left section with book image
            const imageSection = document.createElement('div');
            imageSection.className = 'submission-image-section';

            // Create decorative frame for image
            const imageFrame = document.createElement('div');
            imageFrame.className = 'submission-image-frame';

            // Create book image
            const bookImage = document.createElement('img');
            bookImage.src = 'book-images/delusions-master.jpg';
            bookImage.alt = 'Delusion\'s Master by Tanith Lee';
            bookImage.className = 'submission-book-image';

            // Create image caption
            const imageCaption = document.createElement('p');
            imageCaption.className = 'image-caption';
            imageCaption.textContent = 'A numinous masterpiece!';

            // Create right section with submission details
            const detailsSection = document.createElement('div');
            detailsSection.className = 'submission-details-section';

            // Create submission info card
            const infoCard = document.createElement('div');
            infoCard.className = 'submission-info-card';

            // Create book details container
            const bookDetails = document.createElement('div');
            bookDetails.className = 'book-details';

            // Create book details heading
            const detailsHeading = document.createElement('h4');
            detailsHeading.textContent = 'Book Information:';

            // Create book title
            const bookTitle = document.createElement('p');
            bookTitle.className = 'book-detail';
            bookTitle.innerHTML = '<strong>Title:</strong> Delusion\'s Master';

            // Create book author
            const bookAuthor = document.createElement('p');
            bookAuthor.className = 'book-detail';
            bookAuthor.innerHTML = '<strong>Author:</strong> Tanith Lee';

            // Create book genre
            const bookGenre = document.createElement('p');
            bookGenre.className = 'book-detail';
            bookGenre.innerHTML = '<strong>Genre:</strong> Dark Fantasy';

            // Create book review container
            const reviewContainer = document.createElement('div');
            reviewContainer.className = 'book-review';

            // Create review heading
            const reviewHeading = document.createElement('h4');
            reviewHeading.textContent = 'Why this book is special:';

            // Create review text
            const reviewText = document.createElement('p');
            reviewText.textContent = 'A compelling story woven with myth, gods, and twisted fates. Tanith Lee\'s prose is poetic and haunting, creating a dark fantasy world unlike any other. The character of Chuz, Lord of Delusion, is fascinating in his complexity and the themes of reality versus illusion are masterfully explored.';

            // Create interactive elements section
            const interactiveSection = document.createElement('div');
            interactiveSection.className = 'interactive-section';

            // Create notes heading
            const notesHeading = document.createElement('h4');
            notesHeading.textContent = 'Add Personal Notes:';

            // Create notes form
            const notesForm = document.createElement('form');
            notesForm.className = 'notes-form';

            // Create notes textarea
            const notesTextarea = document.createElement('textarea');
            notesTextarea.className = 'notes-textarea';
            notesTextarea.placeholder = 'Add your personal notes about this book...';
            notesTextarea.rows = 3;

            // Create save button
            const saveButton = document.createElement('button');
            saveButton.type = 'button';
            saveButton.className = 'save-notes-btn';
            saveButton.textContent = 'Save Notes';

            // Add event listener to save button
            saveButton.addEventListener('click', function () {
                const notes = notesTextarea.value.trim();
                if (notes) {
                    // Create saved notes display
                    const savedNotes = document.createElement('div');
                    savedNotes.className = 'saved-notes';

                    // Create notes heading
                    const notesLabel = document.createElement('h5');
                    notesLabel.textContent = 'Your Notes:';

                    // Create notes content
                    const notesContent = document.createElement('p');
                    notesContent.textContent = notes;

                    // Create timestamp
                    const timestamp = document.createElement('small');
                    timestamp.className = 'notes-timestamp';
                    const now = new Date();
                    timestamp.textContent = `Added on ${now.toLocaleDateString()} at ${now.toLocaleTimeString()}`;

                    // Assemble saved notes
                    savedNotes.appendChild(notesLabel);
                    savedNotes.appendChild(notesContent);
                    savedNotes.appendChild(timestamp);

                    // Add to page
                    const existingNotes = document.querySelector('.saved-notes');
                    if (existingNotes) {
                        interactiveSection.replaceChild(savedNotes, existingNotes);
                    } else {
                        interactiveSection.appendChild(savedNotes);
                    }

                    // Clear textarea
                    notesTextarea.value = '';
                }
            });

            // Create read more button
            const readMoreBtn = document.createElement('a');
            readMoreBtn.href = 'https://www.goodreads.com/book/show/669030.Delusion_s_Master?from_search=true&from_srp=true&qid=445Tfwvgiz&rank=1';
            readMoreBtn.className = 'read-more-btn';
            readMoreBtn.textContent = 'View on Goodreads';
            readMoreBtn.target = '_blank';
            readMoreBtn.rel = 'noopener noreferrer';

            // Assemble the DOM structure using appendChild
            imageFrame.appendChild(bookImage);
            imageSection.appendChild(imageFrame);
            imageSection.appendChild(imageCaption);

            notesForm.appendChild(notesTextarea);
            notesForm.appendChild(saveButton);

            interactiveSection.appendChild(notesHeading);
            interactiveSection.appendChild(notesForm);

            reviewContainer.appendChild(reviewHeading);
            reviewContainer.appendChild(reviewText);

            bookDetails.appendChild(detailsHeading);
            bookDetails.appendChild(bookTitle);
            bookDetails.appendChild(bookAuthor);
            bookDetails.appendChild(bookGenre);
            bookDetails.appendChild(reviewContainer);
            bookDetails.appendChild(readMoreBtn);

            infoCard.appendChild(bookDetails);

            detailsSection.appendChild(infoCard);
            detailsSection.appendChild(interactiveSection);

            submissionContainer.appendChild(imageSection);
            submissionContainer.appendChild(detailsSection);

            submissionSection.appendChild(sectionHeading);
            submissionSection.appendChild(submissionContainer);

            // Replace the original content
            const bookDisplay = document.getElementById('bookDisplay');
            const profileSection = document.querySelector('.profile-section');

            // Hide the original empty message
            bookDisplay.style.display = 'none';

            // Replace original heading with our section
            profileSection.replaceChild(submissionSection, profileSection.querySelector('.section-title'));
        });
    </script>

    <section class="profile-section">
        <h2 class="section-title">Submitted Information</h2>
        <div id="bookDisplay" class="book-display">
            <!-- Content will be populated by JavaScript -->
        </div>
    </section>

    <script>
        // Get the stored book data
        const storedData = localStorage.getItem('bookData');

        if (storedData) {
            // Parse the JSON data
            const bookData = JSON.parse(storedData);

            // Get the display element
            const displayDiv = document.getElementById('bookDisplay');

            // Create HTML content with the book data
            const content = `
                <div class="book-info-card">
                    <div class="book-details">
                        <h4>Submitted Book:</h4>
                        <p class="book-detail"><strong>Title:</strong> ${bookData.bookTitle}</p>
                        <p class="book-detail"><strong>Author:</strong> ${bookData.author}</p>
                        <p class="book-detail"><strong>Genre:</strong> ${bookData.genre}</p>
                        <div class="book-review">
                            <h4>Why this book is special:</h4>
                            <p>${bookData.review}</p>
                        </div>
                    </div>
                </div>
            `;

            // Set the HTML content
            displayDiv.innerHTML = content;
        } else {
            // Handle case when no data is available
            document.getElementById('bookDisplay').innerHTML = `
                <p>No book information has been submitted yet. 
                <a href="book-form.html">Share your favorite book here</a>.</p>
            `;
        }
    </script>

    <!-- Include the lightbox script -->
    <script src="lightbox.js"></script>
</body>

</html>